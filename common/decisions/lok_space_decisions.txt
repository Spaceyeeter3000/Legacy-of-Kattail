lok_space_program_cat = {
	#General formula for success chance calc is:
	# (body_exp + space_exp/2)/difficulty = success rate
	# if i have 10 muno exp and 20 space exp and do a difficulty 50 mission on muno
	#(10 + 20/2) / 50 = 20/50 = 40% success chance

	#Flusion
	lok_flusion_suborbital_flight = {
		icon = GFX_decision_generic_nationalism
		
		days_remove = 1

		visible = {
			has_tech = rocket_engines
		}

		available = {
			num_of_civilian_factories_available_for_projects > 0
		}

		modifier = {
			civilian_factory_use = 1
		}

		remove_effect = {
			add_to_variable = { total_launches = 1 }

			set_temp_variable = { mission_difficulty = 3 }
			calculate_flusion_mission_success_odds = yes

			random_list = {
				mission_success_odds = {
					custom_effect_tooltip = lok_space_mission_success

					set_temp_variable = { space_exp_gained = 0.5 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip
				
					set_temp_variable = { flusion_exp_gained = 0.5 }
					add_to_variable = { flusion_exp = flusion_exp_gained }
					custom_effect_tooltip = lok_add_flusion_exp_tooltip
					
					if = {
						limit = { NOT = { has_country_flag = lok_flusion_suborbital_flight_done } }
						custom_effect_tooltip = lok_first_time_we_do_mission
						set_country_flag = lok_flusion_suborbital_flight_done
						set_temp_variable = { flusion_exp_gained = 1 }
						add_to_variable = { space_exp = flusion_exp_gained }
						custom_effect_tooltip = lok_add_flusion_exp_tooltip
						add_political_power = 25		
					}

					if = {
						limit = { NOT = { any_country = { has_country_flag = lok_flusion_suborbital_flight_done } } }
						custom_effect_tooltip = lok_first_time_we_do_mission_ever
						add_political_power = 100
					}

					custom_effect_tooltip = lok_space_mission_spacer
				}
				mission_failure_odds = {
					custom_effect_tooltip = lok_space_mission_failure

					set_temp_variable = { space_exp_gained = 0.5 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip

					country_event = { id = LOK_space.1 }
				}
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	lok_flusion_orbital_flight = {
		icon = GFX_decision_generic_nationalism
		
		days_remove = 1

		visible = {
			has_tech = rocket_engines
		}

		available = {
			has_equipment = { lok_light_chemical_rocket_0 > 0 }
			num_of_civilian_factories_available_for_projects > 0
		}

		modifier = {
			civilian_factory_use = 1
		}

		remove_effect = {
			add_equipment_to_stockpile = { type = lok_light_chemical_rocket_0 amount = -1 }

			add_to_variable = { total_launches = 1 }

			set_temp_variable = { mission_difficulty = 6 }
			calculate_flusion_mission_success_odds = yes

			random_list = {
				mission_success_odds = {
					custom_effect_tooltip = lok_space_mission_success

					set_temp_variable = { space_exp_gained = 1 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip
				
					set_temp_variable = { flusion_exp_gained = 1 }
					add_to_variable = { flusion_exp = flusion_exp_gained }
					custom_effect_tooltip = lok_add_flusion_exp_tooltip
					
					if = {
						limit = { NOT = { has_country_flag = lok_flusion_orbital_flight_done } }
						custom_effect_tooltip = lok_first_time_we_do_mission
						set_country_flag = lok_flusion_orbital_flight_done
						set_temp_variable = { flusion_exp_gained = 2 }
						add_to_variable = { space_exp = flusion_exp_gained }
						custom_effect_tooltip = lok_add_flusion_exp_tooltip
						add_political_power = 25	
					}

					if = {
						limit = { NOT = { any_country = { has_country_flag = lok_flusion_orbital_flight_done } } }
						custom_effect_tooltip = lok_first_time_we_do_mission_ever
						add_political_power = 100
					}

					custom_effect_tooltip = lok_space_mission_spacer
				}
				mission_failure_odds = {
					custom_effect_tooltip = lok_space_mission_failure

					set_temp_variable = { space_exp_gained = 1 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip

					country_event = { id = LOK_space.1 }
				}
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	lok_flusion_spy_satellite = {
		icon = GFX_decision_generic_nationalism
		
		days_remove = 10

		visible = {
			has_tech = rocket_engines
		}

		available = {
			OR = {
				has_equipment = { lok_light_chemical_rocket > 0 }
				has_equipment = { lok_reusable_light_chemical_rocket > 0 }
			}
			num_of_civilian_factories_available_for_projects > 0
		}

		modifier = {
			civilian_factory_use = 10
		}

		complete_effect = {
			if = { #Use the expendable rockets if we have em
				limit = {
					has_equipment = { lok_light_chemical_rocket_0 > 0 }
				}
				add_equipment_to_stockpile = { type = lok_light_chemical_rocket_0 amount = -1 }
			}	
			else_if = { #Send up the Reusable rockets if we have 'em
				limit = {
					has_equipment = { lok_reusable_light_chemical_rocket_0 > 0 }
				}
				set_country_flag = lok_flusion_spy_satellite_reusable
				add_equipment_to_stockpile = { type = lok_reusable_light_chemical_rocket_0 amount = -1 }
			}
		}

		remove_effect = {
			add_to_variable = { total_launches = 1 }

			set_temp_variable = { mission_difficulty = 10 }
			calculate_flusion_mission_success_odds = yes

			random_list = {
				mission_success_odds = {
					custom_effect_tooltip = lok_space_mission_success
					custom_effect_tooltip = lok_flusion_spy_satellite_tt

					add_to_variable = { spy_sat_count = 1 }

					set_temp_variable = { space_exp_gained = 0.5 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip
				
					set_temp_variable = { flusion_exp_gained = 0.5 }
					add_to_variable = { flusion_exp = flusion_exp_gained }
					custom_effect_tooltip = lok_add_flusion_exp_tooltip
					
					if = { #The rocket comes back! Yippee!
						limit = { has_country_flag = lok_flusion_spy_satellite_reusable }
						add_equipment_to_stockpile = { type = lok_reusable_light_chemical_rocket_0 amount = 1 }
					}

					custom_effect_tooltip = lok_space_mission_spacer
				}
				mission_failure_odds = {
					custom_effect_tooltip = lok_space_mission_failure

					set_temp_variable = { space_exp_gained = 1 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip

					country_event = { id = LOK_space.1 }
				}
			}

			if = {
				limit = { has_country_flag = lok_flusion_spy_satellite_reusable }
				clr_country_flag = lok_flusion_spy_satellite_reusable
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	lok_survey_state_on_muno = {
		icon = GFX_decision_generic_survey

		state_target = yes
		
		days_remove = 120

		visible = {
			FROM = {
				impassable = no
				is_owned_by = MUN
				NOT = { has_state_flag = lok_muno_state_surveyed_by_@ROOT }
			}
		}

		on_map_mode = map_only

		available = {
			OR = {
				has_equipment = { lok_heavy_chemical_rocket > 4 }
				has_equipment = { lok_reusable_heavy_chemical_rocket > 4 }
			}
			num_of_civilian_factories_available_for_projects > 9
			custom_trigger_tooltip = {
				tooltip = lok_survey_state_on_muno_only_one
				hidden_trigger = { NOT = { has_country_flag = lok_surveying_muno } }
			}
		}


		modifier = {
			civilian_factory_use = 10
		}

		complete_effect = {
			set_country_flag = lok_surveying_muno
			if = { #Use the expendable rockets if we have em
				limit = {
					has_equipment = { lok_heavy_chemical_rocket > 4 }
				}
				add_equipment_to_stockpile = { type = lok_heavy_chemical_rocket amount = -5 }
			}	
			else_if = { #Send up the Reusable rockets if we have 'em
				limit = {
					has_equipment = { lok_reusable_heavy_chemical_rocket > 4 }
				}
				set_country_flag = lok_muno_state_survey_reusable
				add_equipment_to_stockpile = { type = lok_reusable_heavy_chemical_rocket amount = -5 }
			}
		}

		cancel_trigger = {
			FROM = { NOT = { is_owned_by = MUN } }
		}

		remove_effect = {
			clr_country_flag = lok_surveying_muno
			add_to_variable = { total_launches = 5 }

			set_temp_variable = { mission_difficulty = 30 }
			calculate_muno_mission_success_odds = yes

			random_list = {
				mission_success_odds = {
					custom_effect_tooltip = lok_space_mission_success
					custom_effect_tooltip = lok_survey_state_on_muno_tt

					set_temp_variable = { space_exp_gained = 2 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip
				
					set_temp_variable = { muno_exp_gained = 2 }
					add_to_variable = { muno_exp = muno_exp_gained }
					custom_effect_tooltip = lok_add_muno_exp_tooltip

					if = { #The rockets comes back! Yippee!
						limit = { has_country_flag = lok_muno_state_survey_reusable }
						add_equipment_to_stockpile = { type = lok_reusable_heavy_chemical_rocket amount = 5 }
					}

					FROM = {
						set_state_flag = lok_muno_state_surveyed_by_@ROOT
					}

					custom_effect_tooltip = lok_space_mission_spacer
				}
				mission_failure_odds = {
					custom_effect_tooltip = lok_space_mission_failure

					set_temp_variable = { space_exp_gained = 1 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip

					set_temp_variable = { muno_exp_gained = 0.5 }
					add_to_variable = { muno_exp = muno_exp_gained }
					custom_effect_tooltip = lok_add_muno_exp_tooltip

					country_event = { id = LOK_space.1 }
				}
			}
		}

		ai_will_do = {
			factor = 200
		}
	}


	lok_colonize_state_on_muno = {
		icon = GFX_decision_generic_space_base

		state_target = yes
		
		days_remove = 120

		visible = {
			FROM = {
				impassable = no
				is_owned_by = MUN
				has_state_flag = lok_muno_state_surveyed_by_@ROOT
			}
		}

		on_map_mode = map_only

		available = {
			has_equipment = { lok_reusable_heavy_chemical_rocket_0 > 49 }
			num_of_civilian_factories_available_for_projects > 10
		}

		modifier = {
			civilian_factory_use = 10
		}

		complete_effect = {
			add_equipment_to_stockpile = { type = lok_reusable_heavy_chemical_rocket amount = -50 }
		}
	
		cancel_trigger = {
			FROM = { NOT = { is_owned_by = MUN } }
		}

		remove_effect = {
			add_to_variable = { total_launches = 50 }

			set_temp_variable = { mission_difficulty = 100 }
			calculate_muno_mission_success_odds = yes

			random_list = {
				mission_success_odds = {
					custom_effect_tooltip = lok_space_mission_success

					set_temp_variable = { space_exp_gained = 5 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip
				
					set_temp_variable = { muno_exp_gained = 5 }
					add_to_variable = { muno_exp = muno_exp_gained }
					custom_effect_tooltip = lok_add_muno_exp_tooltip
					
					FROM = {
						transfer_state_to = ROOT
						add_core_of = ROOT
						add_manpower = 1000
						hidden_effect = {
							set_variable = { space_colony_level = 1 }
						}
					}

					if = {
						limit = { NOT = { has_country_flag = lok_muno_base_done } }
						set_country_flag = lok_muno_base_done
						custom_effect_tooltip = lok_first_time_we_do_mission
						set_temp_variable = { muno_exp_gained = 5 }
						add_to_variable = { space_exp = flusion_exp_gained }
						custom_effect_tooltip = lok_add_muno_exp_tooltip
						add_political_power = 50	
					}

					if = {
						limit = { NOT = { any_country = { has_country_flag = lok_muno_base_done } } }
						custom_effect_tooltip = lok_first_time_we_do_mission_ever
						add_political_power = 200
					}

					set_temp_variable = { extra_logistics_capacity = 50 }
					custom_effect_tooltip = lok_extra_logistics_capacity_tt

					custom_effect_tooltip = lok_space_mission_spacer
				}
				mission_failure_odds = {
					custom_effect_tooltip = lok_space_mission_failure

					set_temp_variable = { space_exp_gained = 1 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip

					set_temp_variable = { muno_exp_gained = 1 }
					add_to_variable = { muno_exp = muno_exp_gained }
					custom_effect_tooltip = lok_add_muno_exp_tooltip

					country_event = { id = LOK_space.1 }
				}
			}
			hidden_effect = {
				calculate_muno_colonies_stats = yes
				calculate_orbital_logistics_capacity = yes
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	lok_build_up_muno_colony = {
		icon = GFX_decision_generic_expand_space_base

		state_target = any_owned_state
		
		days_remove = 120

		visible = {
			FROM = {
				impassable = no
				is_core_of = MUN
				is_controlled_by = ROOT
				check_variable = { space_colony_level < 25 } 
			}
		}

		on_map_mode = map_only

		available = {
			has_equipment = { lok_reusable_heavy_chemical_rocket > 49 }
			num_of_civilian_factories_available_for_projects > 10
		}

		modifier = {
			civilian_factory_use = 10
		}

		complete_effect = {
			add_equipment_to_stockpile = { type = lok_reusable_heavy_chemical_rocket_0 amount = -50 }
		}

		cancel_trigger = {
			FROM = { NOT = { is_controlled_by = ROOT } }
		}

		remove_effect = {
			add_to_variable = { total_launches = 50 }

			set_temp_variable = { mission_difficulty = 100 }
			calculate_muno_mission_success_odds = yes

			random_list = {
				mission_success_odds = {
					custom_effect_tooltip = lok_space_mission_success
					custom_effect_tooltip = lok_build_up_muno_colony_tt

					set_temp_variable = { space_exp_gained = 2.5 }
					add_to_variable = { space_exp = space_exp_gained }
					custom_effect_tooltip = lok_add_space_exp_tooltip
				
					set_temp_variable = { muno_exp_gained = 2.5 }
					add_to_variable = { muno_exp = muno_exp_gained }
					custom_effect_tooltip = lok_add_muno_exp_tooltip
					
					FROM = {
						add_extra_state_shared_building_slots = 1
						add_manpower = 2500
						hidden_effect = {
							add_to_variable = { space_colony_level = 1 }
						}
						if = {
							limit = { check_variable = { space_colony_level = 3 } }
							every_neighbor_state = {
								limit = {
									impassable = no
									NOT = { has_state_flag = lok_muno_state_surveyed_by_@ROOT }
								}
								set_state_flag = lok_muno_state_surveyed_by_@ROOT
							}
						}
					}
					set_temp_variable = { extra_logistics_capacity = 50 }
					custom_effect_tooltip = lok_extra_logistics_capacity_tt

					custom_effect_tooltip = lok_space_mission_spacer
				}
				mission_failure_odds = {
					custom_effect_tooltip = lok_space_mission_failure

					add_political_power = -25

					country_event = { id = LOK_space.1 }
				}
			}
			hidden_effect = {
				calculate_muno_colonies_stats = yes
				calculate_orbital_logistics_capacity = yes
			}
		}

		ai_will_do = {
			factor = 200
		}
	}


	lok_colonize_state_on_xenon = {
		icon = GFX_decision_generic_nationalism

		state_target = yes
		
		days_remove = 120

		visible = {
			FROM = {
				impassable = no
				is_owned_by = XEN
			}
		}

		on_map_mode = map_only

		available = {
			num_of_civilian_factories_available_for_projects > 10
		}

		modifier = {
			civilian_factory_use = 10
		}
		
		cancel_trigger = {
			FROM = { NOT = { is_owned_by = XEN } }
		}

		remove_effect = {
			FROM = {
				transfer_state_to = ROOT
				add_core_of = ROOT
				add_manpower = 100
				hidden_effect = {
					set_variable = { space_colony_level = 1 }
				}
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	lok_build_up_xenon_colony = {
		icon = GFX_decision_generic_nationalism

		state_target = any_owned_state
		
		days_remove = 120

		visible = {
			FROM = {
				impassable = no
				is_core_of = XEN
				is_controlled_by = ROOT
			}
		}

		on_map_mode = map_only

		available = {
			num_of_civilian_factories_available_for_projects > 10
		}

		modifier = {
			civilian_factory_use = 10
		}

		cancel_trigger = {
			FROM = { NOT = { is_controlled_by = ROOT } }
		}

		remove_effect = {
			FROM = {
				add_extra_state_shared_building_slots = 1
				add_manpower = 2500
				hidden_effect = {
					add_to_variable = { space_colony_level = 1 }
				}
			}
		}

		ai_will_do = {
			factor = 200
		}
	}
}